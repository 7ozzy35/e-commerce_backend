{"ast":null,"code":"import express from 'express';\nconst app = express();\nconst port = 3000;\n\n// Body parser middleware\napp.use(bodyParser.json());\n\n// CRUD işlemleri\n\n// Create (Yeni ürün ekle)\napp.post('/products', async (req, res) => {\n  const {\n    name,\n    price,\n    description\n  } = req.body;\n  const query = 'INSERT INTO products (name, price, description) VALUES ($1, $2, $3) RETURNING *';\n  const values = [name, price, description];\n  try {\n    const result = await dbClient.query(query, values);\n    res.status(201).json(result.rows[0]);\n  } catch (err) {\n    res.status(400).json({\n      message: 'Error creating product',\n      error: err\n    });\n  }\n});\n\n// Read (Ürünleri listele)\napp.get('/products', async (req, res) => {\n  const query = 'SELECT * FROM products';\n  try {\n    const result = await dbClient.query(query);\n    res.status(200).json(result.rows);\n  } catch (err) {\n    res.status(400).json({\n      message: 'Error fetching products',\n      error: err\n    });\n  }\n});\n\n// Read (Tek bir ürünü göster)\napp.get('/products/:id', async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const query = 'SELECT * FROM products WHERE id = $1';\n  const values = [id];\n  try {\n    const result = await dbClient.query(query, values);\n    if (result.rows.length > 0) {\n      res.status(200).json(result.rows[0]);\n    } else {\n      res.status(404).json({\n        message: 'Product not found'\n      });\n    }\n  } catch (err) {\n    res.status(400).json({\n      message: 'Error fetching product',\n      error: err\n    });\n  }\n});\n\n// Update (Ürün güncelle)\napp.put('/products/:id', async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const {\n    name,\n    price,\n    description\n  } = req.body;\n  const query = 'UPDATE products SET name = $1, price = $2, description = $3 WHERE id = $4 RETURNING *';\n  const values = [name, price, description, id];\n  try {\n    const result = await dbClient.query(query, values);\n    if (result.rows.length > 0) {\n      res.status(200).json(result.rows[0]);\n    } else {\n      res.status(404).json({\n        message: 'Product not found'\n      });\n    }\n  } catch (err) {\n    res.status(400).json({\n      message: 'Error updating product',\n      error: err\n    });\n  }\n});\n\n// Delete (Ürün sil)\napp.delete('/products/:id', async (req, res) => {\n  const {\n    id\n  } = req.params;\n  const query = 'DELETE FROM products WHERE id = $1 RETURNING *';\n  const values = [id];\n  try {\n    const result = await dbClient.query(query, values);\n    if (result.rows.length > 0) {\n      res.status(200).json({\n        message: 'Product deleted'\n      });\n    } else {\n      res.status(404).json({\n        message: 'Product not found'\n      });\n    }\n  } catch (err) {\n    res.status(400).json({\n      message: 'Error deleting product',\n      error: err\n    });\n  }\n});\n\n// Sunucuyu başlat\napp.listen(port, () => {\n  console.log(`Server is running at http://localhost:${port}`);\n});","map":{"version":3,"names":["express","app","port","use","bodyParser","json","post","req","res","name","price","description","body","query","values","result","dbClient","status","rows","err","message","error","get","id","params","length","put","delete","listen","console","log"],"sources":["D:/Ronwell Task 1/src/index.ts"],"sourcesContent":["import express, { Request, Response } from 'express';\r\nimport { AppDataSource } from './data_source';\r\nimport { Product } from './entity/Product';\r\nimport cors from 'cors';\r\n\r\nconst app = express();\r\nconst port = 3000;\r\n\r\n// Body parser middleware\r\napp.use(bodyParser.json());\r\n\r\n// CRUD işlemleri\r\n\r\n// Create (Yeni ürün ekle)\r\napp.post('/products', async (req: Request, res: Response) => {\r\n  const { name, price, description } = req.body;\r\n\r\n  const query = 'INSERT INTO products (name, price, description) VALUES ($1, $2, $3) RETURNING *';\r\n  const values = [name, price, description];\r\n\r\n  try {\r\n    const result = await dbClient.query(query, values);\r\n    res.status(201).json(result.rows[0]);\r\n  } catch (err) {\r\n    res.status(400).json({ message: 'Error creating product', error: err });\r\n  }\r\n});\r\n\r\n// Read (Ürünleri listele)\r\napp.get('/products', async (req: Request, res: Response) => {\r\n  const query = 'SELECT * FROM products';\r\n\r\n  try {\r\n    const result = await dbClient.query(query);\r\n    res.status(200).json(result.rows);\r\n  } catch (err) {\r\n    res.status(400).json({ message: 'Error fetching products', error: err });\r\n  }\r\n});\r\n\r\n// Read (Tek bir ürünü göster)\r\napp.get('/products/:id', async (req: Request, res: Response) => {\r\n  const { id } = req.params;\r\n\r\n  const query = 'SELECT * FROM products WHERE id = $1';\r\n  const values = [id];\r\n\r\n  try {\r\n    const result = await dbClient.query(query, values);\r\n    if (result.rows.length > 0) {\r\n      res.status(200).json(result.rows[0]);\r\n    } else {\r\n      res.status(404).json({ message: 'Product not found' });\r\n    }\r\n  } catch (err) {\r\n    res.status(400).json({ message: 'Error fetching product', error: err });\r\n  }\r\n});\r\n\r\n// Update (Ürün güncelle)\r\napp.put('/products/:id', async (req: Request, res: Response) => {\r\n  const { id } = req.params;\r\n  const { name, price, description } = req.body;\r\n\r\n  const query = 'UPDATE products SET name = $1, price = $2, description = $3 WHERE id = $4 RETURNING *';\r\n  const values = [name, price, description, id];\r\n\r\n  try {\r\n    const result = await dbClient.query(query, values);\r\n    if (result.rows.length > 0) {\r\n      res.status(200).json(result.rows[0]);\r\n    } else {\r\n      res.status(404).json({ message: 'Product not found' });\r\n    }\r\n  } catch (err) {\r\n    res.status(400).json({ message: 'Error updating product', error: err });\r\n  }\r\n});\r\n\r\n// Delete (Ürün sil)\r\napp.delete('/products/:id', async (req: Request, res: Response) => {\r\n  const { id } = req.params;\r\n\r\n  const query = 'DELETE FROM products WHERE id = $1 RETURNING *';\r\n  const values = [id];\r\n\r\n  try {\r\n    const result = await dbClient.query(query, values);\r\n    if (result.rows.length > 0) {\r\n      res.status(200).json({ message: 'Product deleted' });\r\n    } else {\r\n      res.status(404).json({ message: 'Product not found' });\r\n    }\r\n  } catch (err) {\r\n    res.status(400).json({ message: 'Error deleting product', error: err });\r\n  }\r\n});\r\n\r\n// Sunucuyu başlat\r\napp.listen(port, () => {\r\n  console.log(`Server is running at http://localhost:${port}`);\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}